<mxfile host="app.diagrams.net" modified="2021-12-22T15:08:16.252Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36" etag="ZmiyrOr4WkwiV_AQihuD" version="16.0.3" type="github" pages="3">
  <diagram id="xljxgBAA948Y7_NDT7y9" name="NameNode启动">
    <mxGraphModel dx="1209" dy="1880" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="IWX_TBx0upN0qYrfrZli-1" value="NameNodeRpcServer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=30;fillColor=#f8cecc;strokeColor=#b85450;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1695" y="-400" width="1200" height="355" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-2" value="NameNode" style="rounded=0;whiteSpace=wrap;html=1;fontSize=30;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="45" y="-1120" width="1610" height="1300" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-3" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=20;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-4" target="IWX_TBx0upN0qYrfrZli-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-4" value="main()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="115" y="-1000" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-5" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=20;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-12" target="IWX_TBx0upN0qYrfrZli-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-6" value="format" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-5">
          <mxGeometry x="-0.4487" y="4" relative="1" as="geometry">
            <mxPoint x="17" y="-29" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-7" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-12" target="IWX_TBx0upN0qYrfrZli-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-8" value="default" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-7">
          <mxGeometry x="-0.0026" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-9" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-12" target="IWX_TBx0upN0qYrfrZli-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ckDPEvMbsLw15Y4IFopy-1" value="GENCLUSTERID" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-9">
          <mxGeometry x="0.2882" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-10" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-12" target="IWX_TBx0upN0qYrfrZli-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ckDPEvMbsLw15Y4IFopy-2" value="finalize" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-10">
          <mxGeometry x="0.2121" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-11" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-12" target="IWX_TBx0upN0qYrfrZli-66">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ckDPEvMbsLw15Y4IFopy-3" value="ROLLBACK" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-11">
          <mxGeometry x="0.2826" y="5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-12" value="createNameNode()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="79.5" y="-830" width="221" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-13" value="format(conf, startOpt.getForceFormat(),startOpt.getInteractiveFormat())" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="570" y="-1070" width="680" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-14" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="570" y="-1000" width="232" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-15" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="570" y="-920" width="232" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-16" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-17" target="IWX_TBx0upN0qYrfrZli-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-17" value="new NameNode(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="570" y="-720" width="232" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-18" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=20;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-25" target="IWX_TBx0upN0qYrfrZli-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-19" value="启动HttpServer服务" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-18">
          <mxGeometry x="-0.2514" y="-2" relative="1" as="geometry">
            <mxPoint x="10" y="-32" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-20" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-25" target="IWX_TBx0upN0qYrfrZli-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-21" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-25" target="IWX_TBx0upN0qYrfrZli-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-22" value="启动RPCServer" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=18;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-21">
          <mxGeometry x="0.0833" y="3" relative="1" as="geometry">
            <mxPoint x="40" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-23" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-25" target="IWX_TBx0upN0qYrfrZli-69">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-24" value="启动公共服务" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=18;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-23">
          <mxGeometry x="0.2638" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-25" value="initialize(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="570" y="-584" width="232" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-26" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=15;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-33" target="IWX_TBx0upN0qYrfrZli-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-27" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-33" target="IWX_TBx0upN0qYrfrZli-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-28" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-33" target="IWX_TBx0upN0qYrfrZli-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-29" value="HTTP服务，端口：50070" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-28">
          <mxGeometry x="-0.8534" y="-3" relative="1" as="geometry">
            <mxPoint x="79" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-30" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-33" target="IWX_TBx0upN0qYrfrZli-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-31" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-33" target="IWX_TBx0upN0qYrfrZli-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-32" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-33" target="IWX_TBx0upN0qYrfrZli-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-33" value="startHttpServer(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="910" y="-850" width="232" height="70" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-34" value="fsck" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1335" y="-1050" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-35" value="listPaths" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1335" y="-890" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-36" value="data" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1335" y="-810" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-37" value="loadNameSystem(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1080" y="-580" width="232" height="70" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-38" value="FSNamesystem" style="rounded=0;whiteSpace=wrap;html=1;fontSize=30;fillColor=#ffe6cc;strokeColor=#d79b00;verticalAlign=top;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1685" y="-1065" width="1210" height="645" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-39" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=15;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-40" target="IWX_TBx0upN0qYrfrZli-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-40" value="createRpcServer(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="950" y="-400" width="270" height="70" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-41" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-42" target="IWX_TBx0upN0qYrfrZli-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-42" value="loadFromDisk()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1783" y="-900" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-43" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-49" target="IWX_TBx0upN0qYrfrZli-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-44" value="1、合并文件" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-43">
          <mxGeometry x="-0.0666" y="-2" relative="1" as="geometry">
            <mxPoint x="3" y="-42" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-45" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-49" target="IWX_TBx0upN0qYrfrZli-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-46" value="2、写入磁盘" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-45">
          <mxGeometry x="0.0507" y="1" relative="1" as="geometry">
            <mxPoint x="18" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-47" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-49" target="IWX_TBx0upN0qYrfrZli-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-48" value="3、打开新的Editlog文件" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-47">
          <mxGeometry x="-0.0291" y="-1" relative="1" as="geometry">
            <mxPoint x="34" y="-19" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-49" value="loadFSImage()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1783" y="-790" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=20;strokeWidth=2;shadow=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-37" target="IWX_TBx0upN0qYrfrZli-59">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1665" y="-540" />
              <mxPoint x="1665" y="-980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-51" value="加载元数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-50">
          <mxGeometry x="-0.4822" y="-5" relative="1" as="geometry">
            <mxPoint y="-8" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-52" value="checksum" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1335" y="-730" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-53" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-54" target="IWX_TBx0upN0qYrfrZli-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-54" value="recoverTransitionRead()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="2205" y="-930" width="262" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-55" value="" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-56" target="IWX_TBx0upN0qYrfrZli-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-56" value="saveNamespace()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="2205" y="-830" width="262" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-57" value="openEditLogForWrite()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="2205" y="-730" width="262" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-58" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=15;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-59" target="IWX_TBx0upN0qYrfrZli-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-59" value="loadNameSystem(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1783" y="-1010" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-60" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=24;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-62" target="IWX_TBx0upN0qYrfrZli-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-61" value="创建RPCServer" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-60">
          <mxGeometry x="-0.5701" y="1" relative="1" as="geometry">
            <mxPoint x="79" y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-62" value="new NameNodeRpcServer(conf,this)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1265" y="-385" width="360" height="70" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-63" value="new RPC.builder()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;" vertex="1" parent="1">
          <mxGeometry x="1975" y="-315" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-64" value="imagetransfer" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1335" y="-970" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-65" value="contentSummary" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1335" y="-645" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-66" value="doRollback(conf, true)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="570" y="-830" width="232" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-69" target="IWX_TBx0upN0qYrfrZli-74">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1675" y="-125" />
              <mxPoint x="1675" y="-550" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-69" target="IWX_TBx0upN0qYrfrZli-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-69" value="startCommonServices(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="930" y="-150" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-70" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;edgeStyle=entityRelationEdgeStyle;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-74" target="IWX_TBx0upN0qYrfrZli-76">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-71" value="检查元数据存储磁盘资源" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-70">
          <mxGeometry x="-0.1175" y="2" relative="1" as="geometry">
            <mxPoint y="-16" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-72" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=30;strokeWidth=2;" edge="1" parent="1" source="IWX_TBx0upN0qYrfrZli-74" target="IWX_TBx0upN0qYrfrZli-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-73" value="安全模式" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="IWX_TBx0upN0qYrfrZli-72">
          <mxGeometry x="-0.186" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-74" value="startCommonServices(conf,haContext)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1775" y="-580" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-75" value="RpcServer.start()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1265" y="-30" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-76" value="checkAvailableResources()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="2390" y="-654" width="330" height="70" as="geometry" />
        </mxCell>
        <mxCell id="IWX_TBx0upN0qYrfrZli-77" value="setBlockTotal()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="2390" y="-550" width="330" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="lAbUES1ijesJqw5qkLP5" name="DataNode启动">
    <mxGraphModel dx="1209" dy="711" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="rC5nzko70Q0iTBSzShL7-0" />
        <mxCell id="rC5nzko70Q0iTBSzShL7-1" parent="rC5nzko70Q0iTBSzShL7-0" />
        <mxCell id="rC5nzko70Q0iTBSzShL7-2" value="DataNode" style="rounded=0;whiteSpace=wrap;html=1;fontSize=30;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="30" y="30" width="1590" height="1310" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-3" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-4" target="rC5nzko70Q0iTBSzShL7-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-4" value="main()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="180" y="100" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-5" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-6" target="rC5nzko70Q0iTBSzShL7-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-6" value="secureMain(args,null)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="180" y="210" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-7" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-8" target="rC5nzko70Q0iTBSzShL7-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-8" value="createDataNode(arg,null,resouces)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="115" y="330" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-9" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-10" target="rC5nzko70Q0iTBSzShL7-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-10" value="instantiateDataNode(arg,null,resouces)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="115" y="450" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-11" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-12" target="rC5nzko70Q0iTBSzShL7-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-12" value="makeInstance(dataLocations,conf,resouces)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="82.5" y="555" width="425" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-13" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-14" target="rC5nzko70Q0iTBSzShL7-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-14" value="new DataNode(conf,locations,resouces)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="82.5" y="700" width="425" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-15" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-19" target="rC5nzko70Q0iTBSzShL7-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-16" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-19" target="rC5nzko70Q0iTBSzShL7-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-17" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-19" target="rC5nzko70Q0iTBSzShL7-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-18" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-19" target="rC5nzko70Q0iTBSzShL7-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-19" value="startDataNode(conf,DataSirs,resouces)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="82.5" y="870" width="425" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-20" value="new DataStorage()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="710" y="750" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-21" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;fontSize=20;strokeWidth=2;" edge="1" parent="rC5nzko70Q0iTBSzShL7-1" source="rC5nzko70Q0iTBSzShL7-22" target="rC5nzko70Q0iTBSzShL7-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-22" value="initDataXceiver(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="710" y="870" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-23" value="startInfoServer(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="710" y="980" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-24" value="new DataXceiverServer(tcpPeerServer,conf,this)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="1050" y="870" width="510" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rC5nzko70Q0iTBSzShL7-25" value="initIpcServer(conf)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="rC5nzko70Q0iTBSzShL7-1">
          <mxGeometry x="710" y="1080" width="270" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="TKQ2NYejXLoy8GYd9mUv" name="MapReduce">
    <mxGraphModel dx="1209" dy="711" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="Du0avzRzLyUj56zm2Fy--0" />
        <mxCell id="Du0avzRzLyUj56zm2Fy--1" parent="Du0avzRzLyUj56zm2Fy--0" />
        <mxCell id="Du0avzRzLyUj56zm2Fy--2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="Du0avzRzLyUj56zm2Fy--1">
          <mxGeometry x="10" y="10" width="790" height="490" as="geometry" />
        </mxCell>
        <mxCell id="Du0avzRzLyUj56zm2Fy--3" value="submit()" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fontSize=18;" vertex="1" parent="Du0avzRzLyUj56zm2Fy--1">
          <mxGeometry x="50" y="100" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Du0avzRzLyUj56zm2Fy--4" value="Job" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="Du0avzRzLyUj56zm2Fy--1">
          <mxGeometry x="185" y="20" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Du0avzRzLyUj56zm2Fy--5" value="1、设置MapReduce的状态为：Define" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" vertex="1" parent="Du0avzRzLyUj56zm2Fy--1">
          <mxGeometry x="320" y="80" width="340" height="130" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
